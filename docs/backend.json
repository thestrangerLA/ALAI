{
    "entities": {
        "Part": {
            "title": "Spare Part",
            "description": "Represents a single spare part in the inventory.",
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "The name of the part."
                },
                "sku": {
                    "type": "string",
                    "description": "Stock Keeping Unit."
                },
                "oemCode": {
                    "type": "string",
                    "description": "Original Equipment Manufacturer Code."
                },
                "brand": {
                    "type": "string",
                    "description": "The brand of the part."
                },
                "category": {
                    "type": "string",
                    "description": "Category of the part (e.g., Brakes, Engine)."
                },
                "compatibleModels": {
                    "type": "string",
                    "description": "A text field listing compatible vehicle models."
                },
                "quantity": {
                    "type": "number",
                    "description": "The current quantity on hand."
                },
                "lowStockThreshold": {
                    "type": "number",
                    "description": "The quantity at which to trigger a low stock alert."
                },
                "costPrice": {
                    "type": "number",
                    "description": "The price paid to acquire the part."
                },
                "sellingPrice": {
                    "type": "number",
                    "description": "The price the part is sold at."
                },
                "createdAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Timestamp when the part was created."
                },
                "updatedAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Timestamp when the part was last updated."
                }
            },
            "required": ["name", "quantity", "createdAt"]
        },
        "StockMovement": {
            "title": "Stock Movement",
            "description": "A log of any change in a part's quantity.",
            "type": "object",
            "properties": {
                "partId": {
                    "type": "string",
                    "description": "The ID of the part that was moved."
                },
                 "partName": {
                    "type": "string",
                    "description": "The name of the part that was moved (for easier reporting)."
                },
                "quantityChange": {
                    "type": "number",
                    "description": "The amount the quantity changed by (can be positive or negative)."
                },
                "newQuantity": {
                    "type": "number",
                    "description": "The new total quantity after the movement."
                },
                "type": {
                    "type": "string",
                    "enum": ["Stock In", "Stock Out", "Initial", "Adjustment"],
                    "description": "The type of stock movement."
                },
                "reason": {
                    "type": "string",
                    "description": "A brief reason for the stock movement (e.g., 'Purchase from Supplier X', 'Sale to Customer Y', 'Initial stock count')."
                },
                "relatedDocId": {
                    "type": "string",
                    "description": "The ID of a related document, like a purchase order or a sales invoice."
                },
                "timestamp": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Timestamp when the movement occurred."
                }
            },
            "required": ["partId", "quantityChange", "newQuantity", "type", "timestamp"]
        }
    },
    "auth": {
        "providers": ["anonymous"]
    },
    "firestore": {
        "/users/{userId}/parts/{partId}": {
            "schema": {
                "$ref": "#/entities/Part"
            },
            "description": "Stores individual spare parts for a user."
        },
        "/users/{userId}/stockMovements/{movementId}": {
            "schema": {
                "$ref": "#/entities/StockMovement"
            },
            "description": "Logs all inventory changes for a user's parts."
        }
    }
}
